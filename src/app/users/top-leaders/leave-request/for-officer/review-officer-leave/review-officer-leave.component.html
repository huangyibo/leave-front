<div>
  <div id="leave-detail" class="modal fade" tabindex="-1" role="dialog">
    <div class="modal-dialog" style="width: 60%;"  role="document">
      <div class="modal-content">
        <div class="modal-header" style="background: #3c8dbc">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="color: white">
            <span style="color: white"  aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" style="color: white">请假信息详情</h4>
        </div>
        <div class="modal-body">
             <div class="row">
               <div class="col-md-5 col-md-offset-1" >
                 <div class="row">
                 <form class="form-horizontal" role="form">
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       姓名
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{editingLeaveRequest.user_name}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       职务职称
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{editingLeaveRequest.major}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)所属部门
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{editingLeaveRequest.department_name}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)请假时间
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{editingLeaveRequest.start_date}} 至 {{editingLeaveRequest.end_date}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)地点
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         <span *ngIf="editingLeaveRequest.origin_addr">{{editingLeaveRequest.origin_addr}}-></span>
                         <span *ngIf="editingLeaveRequest.middle_addr">{{editingLeaveRequest.middle_addr}}-></span>
                         <span *ngIf="editingLeaveRequest.dest_addr">{{editingLeaveRequest.dest_addr}}</span>
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       交通工具
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{!editingLeaveRequest.traffic_tool? '无' : editingLeaveRequest.traffic_tool}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       通讯联系
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{!editingLeaveRequest.phone? '无': editingLeaveRequest.phone}}
                       </p>
                     </div>
                   </div>

                 </form>
                 </div>
               </div>
               <div class="col-md-5 " style="border-left: #d2d6de solid 2px;padding-left: 2%" >
                 <form class="form-horizontal" role="form">
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       经费来源
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{!editingLeaveRequest.funds_source? '无':editingLeaveRequest.funds_source}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       授课任务
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{!editingLeaveRequest.teaching? '无':'有'}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       保密电脑
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line">
                         {{!editingLeaveRequest.pc? '未携带':'携带'}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)请假事由
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static" style="word-wrap:break-word; word-break:normal;">
                         {{!editingLeaveRequest.reason? '无':editingLeaveRequest.reason}}
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)科室审核
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <p class="form-control-static no-new-line" style="word-wrap:break-word; word-break:normal;">
                         <span *ngIf="editingLeaveRequest.leader_agree == null" class="label label-warning">待审核</span>
                         <span *ngIf="!(editingLeaveRequest.leader_agree == null)">{{editingLeaveRequest.leader_name}}--
                            <span *ngIf="editingLeaveRequest.leader_agree" class="label label-success">通过</span>
                            <span *ngIf="!editingLeaveRequest.leader_agree" class="label label-danger">未通过</span>
                         </span>
                       </p>
                     </div>
                   </div>
                   <div class="form-group">
                     <label class="col-md-4 col-lg-4 control-label">
                       (*)请假审核
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                       <div [ngClass]="{'hidden': !(editingLeaveRequest.top_leader_id==null)}">
                       <label class="radio-inline" style="font-size: 15px">
                         <input type="radio" name="top_leader_agree" [value]="true" [(ngModel)]="editingLeaveRequest.top_leader_agree" required/>同意
                       </label>
                       <label class="radio-inline" style="font-size: 15px">
                         <input type="radio" name="top_leader_agree" [value]="false" [(ngModel)]="editingLeaveRequest.top_leader_agree" required/>不同意
                       </label>
                       </div>
                       <p class="form-control-static no-new-line" [ngClass]="{'hidden': !editingLeaveRequest.top_leader_id}">
                         {{editingLeaveRequest.top_leader_agree? '同意':'不同意'}}
                       </p>
                     </div>
                   </div>

                   <div class="form-group has-feedback">
                     <label for="top_leader_comment" class="col-xs-4 col-sm-4 col-md-4 col-lg-4 control-label">
                       (*)请假批注
                     </label>
                     <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                      <textarea class="form-control" [ngClass]="{'hidden': !(editingLeaveRequest.top_leader_id==null)}" name="top_leader_comment" rows="3" id="top_leader_comment" placeholder="请输入100字以内的请假批注"
                                aria-describedby="top_leader_comment_status" style="margin-top: 10px;" required>
                      </textarea>
                       <p class="form-control-static " [ngClass]="{'hidden': !editingLeaveRequest.top_leader_id}">
                         {{!editingLeaveRequest.top_leader_comment? '无':editingLeaveRequest.top_leader_comment}}
                       </p>
                       <!--<span class="glyphicon glyphicon-ok form-control-feedback" aria-hidden="true"></span>-->
                       <span id="top_leader_comment_status" class="sr-only">(success)</span>
                     </div>
                   </div>
                 </form>
               </div>
             </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal"
                  [ngClass]="{'hidden': editingLeaveRequest.top_leader_id==null}">关闭
          </button>
          <button type="button" class="btn btn-default" data-dismiss="modal"
                  [ngClass]="{'hidden': !(editingLeaveRequest.top_leader_id==null)}">取消
          </button>
          <button type="button" class="btn btn-primary" (click)="submitReview()"
                  [ngClass]="{'hidden': !(editingLeaveRequest.top_leader_id==null)}">提交
          </button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>

<toaster-container [toasterconfig]="toasterconfig"></toaster-container>
<div class="container" style="width:110%;">
  <div class="row">
    <div
      class="table-responsive col-md-11 col-md-offset-0">
      <table class="table table-striped table-hover">
        <thead>
        <tr>
          <th>编号</th>
          <th>请假人</th>
          <th>请假时间</th>
          <th>请假事由</th>
          <th>地&nbsp;&nbsp;点</th>
          <th>申请时间</th>
          <th>科室审核</th>
          <th>操作</th>
        </tr>
        </thead>
        <tbody *ngIf="leaveRequests">
        <tr
          *ngFor="let leave of leaveRequests | async | paginate: {id: 'leader_review_server', itemsPerPage: 10, currentPage: currentPage, totalItems: rowCount}">

        <td>
          <a>{{leave.id}}</a>
          </td>
          <td class="no-new-line">
            <a>{{leave.user_name}}</a>
          </td>

          <td class="no-new-line">{{leave.start_date}} 至 {{leave.end_date}}</td>

          <td class="no-new-line">
            <div class="text-wrap" title="{{leave.reason}}">{{leave.reason}}</div>
          </td>

          <td class="no-new-line">
            <span *ngIf="leave.origin_addr">{{leave.origin_addr}}-></span>
            <span *ngIf="leave.middle_addr">{{leave.middle_addr}}-></span>
            <span *ngIf="leave.dest_addr">{{leave.dest_addr}}</span>
          </td>

          <td class="no-new-line">
            {{leave.apply_time}}
          </td>

          <td class="no-new-line">
            <span *ngIf="leave.leader_agree == null" class="label label-warning">待审核</span>
            <span *ngIf="!(leave.leader_agree == null)">{{leave.leader_name}}--
              <span *ngIf="leave.leader_agree" class="label label-success">通过</span>
              <span *ngIf="!leave.leader_agree" class="label label-danger">未通过</span>
            </span>
          </td>

          <td class="no-new-line">
            <a (click)="editLeave(leave.id)" class="fa fa-edit" title="查看请假详情" [ngClass]="{'hidden': !(leave.top_leader_agree==null)}"
               role="button" data-toggle="modal" data-target="#leave-detail"></a>
            <a (click)="reviewLeave(leave.id, true, '同意请假')" class="btn btn-success" title="同意" role="button"
               [ngClass]="{'hidden': !(leave.top_leader_agree==null)}">同意</a>
            <a (click)="reviewLeave(leave.id, false, '不同意请假')" class="btn btn-danger" title="不同意" role="button"
               [ngClass]="{'hidden': !(leave.top_leader_agree==null)}">不同意</a>
            <span class="label label-success" [ngClass]="{'hidden': !leave.top_leader_agree}">已同意</span>
            <span class="label label-warning" [ngClass]="{'hidden': leave.top_leader_agree || (leave.top_leader_agree==null)}">未同意</span>
          </td>
        </tr>
    <!--    <tr>
          <td>
            <a href="#">2</a>
          </td>
          <td>
            <a href="#">奕云天</a>
          </td>
          <td>2017-02-20 至 2017-02-28</td>
          <td>公务出差</td>
          <td>
            上海&nbsp;->&nbsp;南京&nbsp;->&nbsp;北京
          </td>
          <td>
            2017-02-19
          </td>
          <td>马云&#45;&#45;
            <span class="review-tag review-passed-tag">通过</span>
          </td>
          <td>
            <a href="#" class="fa fa-edit" title="查看请假详情"></a>
            <a href="#" class="btn btn-success" title="同意" role="button">同意</a>
            <a href="#" class="btn btn-danger" title="不同意" role="button">不同意</a>
          </td>
        </tr>-->

        </tbody>
      </table>
    </div>

    <div class="col-md-11 col-md-offset-0 table-responsive">
      <div class="col-md-6 col-md-offset-3 text-center">
        <div class="has-text-centered">
          <div class="spinner" [ngClass]="{ 'hidden': !isLoading }"></div>
          <pagination-controls (pageChange)="getPage($event)" id="leader_review_server"></pagination-controls>
        </div>
      </div>
    </div>

  </div>
</div>
